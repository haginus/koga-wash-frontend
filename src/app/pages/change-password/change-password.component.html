<app-loading *ngIf="userEmail == null" type="spinner"></app-loading>

<div class="container">
  <div class="login-container mat-elevation-z2">
    <app-loading *ngIf="loading"></app-loading>
    <div class="image-container">
      <img src="../../../assets/img/logo.png" />
    </div>
    <h2>Schimbați parola</h2>
    <form [formGroup]="changePasswordForm">
      <input type="email" name="email" [value]="userEmail" style="display: none;" />
      <mat-form-field appearance="outline" *ngIf="mode == 'normal'">
        <mat-label>Parolă curentă</mat-label>
        <input matInput type="password" formControlName="currentPassword">
        <mat-error>Parola trebuie să aibă cel puțin 8 caractere.</mat-error>
      </mat-form-field>
      <mat-form-field appearance="outline">
        <mat-label>Parolă nouă</mat-label>
        <input matInput type="password" formControlName="password" [errorStateMatcher]="matcher">
        <mat-error>Parola trebuie să aibă cel puțin 8 caractere.</mat-error>
      </mat-form-field>
      <mat-form-field appearance="outline">
        <mat-label>Confirmați parola</mat-label>
        <input matInput type="password" formControlName="confirmPassword" [errorStateMatcher]="matcher">
        <mat-error *ngIf="changePasswordForm.errors?.passwordsNotMatched">Parolele nu corespund.</mat-error>
      </mat-form-field>
      <div class="align-center">
        <button mat-raised-button color="accent" [disabled]="changePasswordForm.invalid || loading"
          (click)="changePassword()">
          Schimbați parola
        </button>
      </div>
    </form>
  </div>
</div>